import tb from 'ts-toolbelt'
import { DateKeys, RID } from '../shared'
import { IsParent } from './types'
import { ID } from '../../../shared/types'

// -------------------------------------------------------------------------------------------------
// Pred
// -------------------------------------------------------------------------------------------------
export const isSpecial = (rel: IsParent): boolean => rel.type === '特別養親子'
// (['特別養親子'] as TypeOfPnC[]).includes(rel.type)

export const isActual = (rel: IsParent): boolean => rel.type === '実親子'

// -------------------------------------------------------------------------------------------------
// Create
// -------------------------------------------------------------------------------------------------
export const create = ({
  type = '実親子',
  startDate,
  endDate,
}: tb.O.Optional<Omit<IsParent, 'ids'>, 'type' | DateKeys>): IsParent => ({
  type,
  startDate: startDate || null,
  endDate: endDate || null,
})

// -------------------------------------------------------------------------------------------------
// Read
// -------------------------------------------------------------------------------------------------
export const get = (idType: 'childID' | 'parentID'): ((rID: RID.DirectedRelID) => ID) =>
  idType === 'childID' ? RID.getDst : RID.getSrc

// -------------------------------------------------------------------------------------------------
// Update
// -------------------------------------------------------------------------------------------------

// -------------------------------------------------------------------------------------------------
// Delete
// -------------------------------------------------------------------------------------------------
